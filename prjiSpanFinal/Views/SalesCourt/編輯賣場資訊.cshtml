@model prjiSpanFinal.ViewModels.SalesCourt.Card賣場ViewModel
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

@{
    ViewData["Title"] = "編輯賣場資訊";

}
@section Styles{
    <style>
        .ordersearchbar {
            padding: 3px;
            text-align: right;
        }

        .m-2 {
            margin-top: 0.25rem !important;
            margin-bottom: 0.25rem !important;
        }
    </style>
}


<input type="hidden" value="@Model.MemberId" id="editsalescourtid" />
<p>
    編輯我的賣場資訊
</p>

<table class="table">
    <thead>
        <tr>
            <th>

            </th>
            <th>
                ID
            </th>
            <th>
                商品名稱
            </th>
            <th>
                商品價格
            </th>
            <th>
                星星數
            </th>
            <th>
                販賣數量
            </th>
            <th>
                選為精選商品
            </th>
        </tr>
    </thead>
    <tbody id="salescourtcardbody">
    </tbody>
</table>




@*<div class="modal fade" id="staticBackdrop1" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel3" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel3">確定要修改為精選商品嗎</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div>請修改後賣場頁面再次確認。</div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="orderrecsubmit" data-bs-target="#staticBackdrop4" data-bs-toggle="modal">送出</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">關閉</button>
                </div>
            </div>
        </div>
    </div>*@

@*<div id="salescourtcardbody">


    </div>*@

<div style="font-size:20px" class="m-2"></div>

@section Scripts{
    <script>
        let mode = 0;
        let eachpages = 1;
        let nowpages = 1;
        let customname = "";

        function returnCard(data) {
            return `<tr>
                        <td></td>
                        <td>
                            編號:
                        </td>
                        <td>
                            ${data.name}
                        </td>
                        <td>
                            ${data.price1} - ${data.price2}
                        </td>
                        <td>
                            ${data.star}
                        </td>
                        <td>
                            ${data.sales}
                        </td>
                        <td>
                            <input type="hidden" value="${data.productid}" class="thisproduct" />
                            <a role="button" class="btn  btn-primary choiceproduct my-2">選為精選商品</a>
                        </td>

                    </tr>`;

        }

        load();

        function load() {
            let keyword = " ";

            $.getJSON("/SalesCourt/GetCard", { id: editsalescourtid.value }, function (data) {

                $("#salescourtcardbody").html("");
                for (let i = 0; i < data.length; i++) {
                    console.log(data);
                    /*$(".check").eq(i).a*/
                    $("#salescourtcardbody").append(
                        returnCard(data[i])
                    );
                }
            })
        }



        $(".choiceproduct").click(function () {
            $.getJSON("/SalesCourt/WriteChoice", { productid: editsalescourtid.value }, function (data) {

                if (data == 1) {
                    $(".choiceproduct").attr('style', 'background-color:#b7b0bd');
                    Swal.fire(
                        '選取成功',
                        '您已選擇精選商品' + $("").val(),
                        'success'
                    );
                }
                else if (data == 0) {
                    $(".choiceproduct").attr('style', 'background-color:#f30959');
                    Swal.fire(
                        '移除精選',
                        '您已移除精選商品' + $("").val(),
                        'warning'
                    );

                }
            })
        })


    </script>
}

